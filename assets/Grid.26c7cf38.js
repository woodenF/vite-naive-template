import{aP as A,t as S,r as N,U as O,a4 as P,d as I,a6 as Q,ay as G,B as $,a5 as V,p as L,aL as x,a3 as q,Q as T,aN as D,a1 as F,A as U,aQ as X,aF as z}from"./index.fe60ce87.js";import{g as Y}from"./get-slot.cbb49382.js";function H(e){if(typeof e=="number")return{"":e.toString()};const n={};return e.split(/ +/).forEach(a=>{if(a==="")return;const[r,t]=a.split(":");t===void 0?n[""]=r:n[r]=t}),n}function y(e,n){var a;if(e==null)return;const r=H(e);if(n===void 0)return r[""];if(typeof n=="string")return(a=r[n])!==null&&a!==void 0?a:r[""];if(Array.isArray(n)){for(let t=n.length-1;t>=0;--t){const s=n[t];if(s in r)return r[s]}return r[""]}else{let t,s=-1;return Object.keys(r).forEach(o=>{const i=Number(o);!Number.isNaN(i)&&n>=i&&i>=s&&(s=i,t=r[o])}),t}}const J={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function W(e){return`(min-width: ${e}px)`}const _={};function Z(e=J){if(!A)return S(()=>[]);if(typeof window.matchMedia!="function")return S(()=>[]);const n=N({}),a=Object.keys(e),r=(t,s)=>{t.matches?n.value[s]=!0:n.value[s]=!1};return a.forEach(t=>{const s=e[t];let o,i;_[s]===void 0?(o=window.matchMedia(W(s)),o.addEventListener?o.addEventListener("change",f=>{i.forEach(p=>{p(f,t)})}):o.addListener&&o.addListener(f=>{i.forEach(p=>{p(f,t)})}),i=new Set,_[s]={mql:o,cbs:i}):(o=_[s].mql,i=_[s].cbs),i.add(r),o.matches&&i.forEach(f=>{f(o,t)})}),O(()=>{a.forEach(t=>{const{cbs:s}=_[e[t]];s.has(r)&&s.delete(r)})}),S(()=>{const{value:t}=n;return a.filter(s=>t[s])})}const E=1,k=P("n-grid"),M=1,K={span:{type:[Number,String],default:M},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var re=I({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:K,setup(){const{xGapRef:e,itemStyleRef:n,overflowRef:a}=Q(k),r=V();return{overflow:a,itemStyle:n,deriveStyle:()=>{const{privateSpan:t=M,privateShow:s=!0,privateColStart:o=void 0,privateOffset:i=0}=r.vnode.props,{value:f}=e,p=G(f||0);return{display:s?"":"none",gridColumn:`${o!=null?o:`span ${t}`} / span ${t}`,marginLeft:i?`calc((100% - (${t} - 1) * ${p}) / ${t} * ${i} + ${p} * ${i})`:""}}}},render(){var e,n;return $("div",{style:[this.itemStyle,this.deriveStyle()]},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e,{overflow:this.overflow}))}});const ee={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},j=24,te={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:j},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var oe=I({name:"Grid",inheritAttrs:!1,props:te,setup(e){const{mergedClsPrefixRef:n,mergedBreakpointsRef:a}=L(e),r=/^\d+$/,t=N(void 0),s=Z((a==null?void 0:a.value)||ee),o=x(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),i=S(()=>{if(!!o.value)return e.responsive==="self"?t.value:s.value}),f=x(()=>{var u;return(u=Number(y(e.cols.toString(),i.value)))!==null&&u!==void 0?u:j}),p=x(()=>y(e.xGap.toString(),i.value)),C=x(()=>y(e.yGap.toString(),i.value)),v=u=>{t.value=u.contentRect.width},b=u=>{F(v,u)},m=N(!1),d=S(()=>{if(e.responsive==="self")return b});return q(k,{itemStyleRef:T(e,"itemStyle"),xGapRef:p,overflowRef:m}),{mergedClsPrefix:n,style:S(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${f.value}, minmax(0, 1fr))`,columnGap:G(p.value),rowGap:G(C.value)})),isResponsive:o,responsiveQuery:i,responsiveCols:f,handleResize:d,overflow:m}},render(){const e=()=>{var n,a,r,t,s,o;this.overflow=!1;const i=U(Y(this)),f=[],{collapsed:p,collapsedRows:C,responsiveCols:v,responsiveQuery:b}=this;i.forEach(l=>{var g,h,c;if(((g=l==null?void 0:l.type)===null||g===void 0?void 0:g.__GRID_ITEM__)!==!0)return;const R=X(l),B=Number((c=y((h=R.props)===null||h===void 0?void 0:h.span,b))!==null&&c!==void 0?c:E);B!==0&&f.push({child:R,rawChildSpan:B})});let m=0;const d=(n=f[f.length-1])===null||n===void 0?void 0:n.child;if(d!=null&&d.props){const l=(a=d.props)===null||a===void 0?void 0:a.suffix;l!==void 0&&l!==!1&&(m=(t=(r=d.props)===null||r===void 0?void 0:r.span)!==null&&t!==void 0?t:E,d.props.privateSpan=m,d.props.privateColStart=v+1-m,d.props.privateShow=!0)}let u=0,w=!1;for(const{child:l,rawChildSpan:g}of f){if(w&&(this.overflow=!0),!w){const h=Number((o=y((s=l.props)===null||s===void 0?void 0:s.offset,b))!==null&&o!==void 0?o:0),c=Math.min(g+h,v)||1;if(l.props?(l.props.privateSpan=c,l.props.privateOffset=h):l.props={privateSpan:c,privateOffset:h},p){const R=u%v;c+R>v&&(u+=v-R),c+u+m>C*v?w=!0:u+=c}}w&&(l.props?l.props.privateShow!==!0&&(l.props.privateShow=!1):l.props={privateShow:!1})}return $("div",z({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),f.map(({child:l})=>l))};return this.isResponsive&&this.responsive==="self"?$(D,{onResize:this.handleResize},{default:e}):e()}});export{re as _,oe as a};

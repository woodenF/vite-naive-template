import{ad as e,F as t,a2 as r,u as s,a9 as o,ab as i,D as a,f as n}from"./index.cc37aceb.js";import{b as l,r as p,d as u,h as v,f as d,k as f,g as c,p as m,t as h,x as S,u as y}from"./vue.201ae94a.js";import{g}from"./get-slot.cbb49382.js";function w(e,t){var r;if(null==e)return;const s=function(e){if("number"==typeof e)return{"":e.toString()};const t={};return e.split(/ +/).forEach((e=>{if(""===e)return;const[r,s]=e.split(":");void 0===s?t[""]=r:t[r]=s})),t}(e);if(void 0===t)return s[""];if("string"==typeof t)return null!==(r=s[t])&&void 0!==r?r:s[""];if(Array.isArray(t)){for(let e=t.length-1;e>=0;--e){const r=t[e];if(r in s)return s[r]}return s[""]}{let e,r=-1;return Object.keys(s).forEach((o=>{const i=Number(o);!Number.isNaN(i)&&t>=i&&i>=r&&(r=i,e=s[o])})),e}}const b={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};const x={};const R=t("n-grid"),N=1;var G=v({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:{span:{type:[Number,String],default:N},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},setup(){const{xGapRef:e,itemStyleRef:t,overflowRef:s}=d(R),o=c();return{overflow:s,itemStyle:t,deriveStyle:()=>{const{privateSpan:t=N,privateShow:s=!0,privateColStart:i,privateOffset:a=0}=o.vnode.props,{value:n}=e,l=r(n||0);return{display:s?"":"none",gridColumn:`${null!=i?i:`span ${t}`} / span ${t}`,marginLeft:a?`calc((100% - (${t} - 1) * ${l}) / ${t} * ${a} + ${l} * ${a})`:""}}}},render(){var e,t;return f("div",{style:[this.itemStyle,this.deriveStyle()]},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e,{overflow:this.overflow}))}});const $={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920};var C=v({name:"Grid",inheritAttrs:!1,props:{responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:24},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},setup(t){const{mergedClsPrefixRef:i,mergedBreakpointsRef:n}=s(t),v=/^\d+$/,d=p(void 0),f=function(t=b){if(!e)return l((()=>[]));if("function"!=typeof window.matchMedia)return l((()=>[]));const r=p({}),s=Object.keys(t),o=(e,t)=>{e.matches?r.value[t]=!0:r.value[t]=!1};return s.forEach((e=>{const r=t[e];let s,i;void 0===x[r]?(s=window.matchMedia(`(min-width: ${r}px)`),s.addEventListener?s.addEventListener("change",(t=>{i.forEach((r=>{r(t,e)}))})):s.addListener&&s.addListener((t=>{i.forEach((r=>{r(t,e)}))})),i=new Set,x[r]={mql:s,cbs:i}):(s=x[r].mql,i=x[r].cbs),i.add(o),s.matches&&i.forEach((t=>{t(s,e)}))})),u((()=>{s.forEach((e=>{const{cbs:r}=x[t[e]];r.has(o)&&r.delete(o)}))})),l((()=>{const{value:e}=r;return s.filter((t=>e[t]))}))}((null==n?void 0:n.value)||$),c=o((()=>!!t.itemResponsive||(!v.test(t.cols.toString())||(!v.test(t.xGap.toString())||!v.test(t.yGap.toString()))))),S=l((()=>{if(c.value)return"self"===t.responsive?d.value:f.value})),y=o((()=>{var e;return null!==(e=Number(w(t.cols.toString(),S.value)))&&void 0!==e?e:24})),g=o((()=>w(t.xGap.toString(),S.value))),N=o((()=>w(t.yGap.toString(),S.value))),G=e=>{d.value=e.contentRect.width},C=e=>{a(G,e)},E=p(!1),_=l((()=>{if("self"===t.responsive)return C}));return m(R,{itemStyleRef:h(t,"itemStyle"),xGapRef:g,overflowRef:E}),{mergedClsPrefix:i,style:l((()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${y.value}, minmax(0, 1fr))`,columnGap:r(g.value),rowGap:r(N.value)}))),isResponsive:c,responsiveQuery:S,responsiveCols:y,handleResize:_,overflow:E}},render(){const e=()=>{var e,t,r,s,o,i;this.overflow=!1;const a=n(g(this)),l=[],{collapsed:p,collapsedRows:u,responsiveCols:v,responsiveQuery:d}=this;a.forEach((e=>{var t,r,s;if(!0!==(null===(t=null==e?void 0:e.type)||void 0===t?void 0:t.__GRID_ITEM__))return;const o=S(e),i=Number(null!==(s=w(null===(r=o.props)||void 0===r?void 0:r.span,d))&&void 0!==s?s:1);0!==i&&l.push({child:o,rawChildSpan:i})}));let c=0;const m=null===(e=l[l.length-1])||void 0===e?void 0:e.child;if(null==m?void 0:m.props){const e=null===(t=m.props)||void 0===t?void 0:t.suffix;void 0!==e&&!1!==e&&(c=null!==(s=null===(r=m.props)||void 0===r?void 0:r.span)&&void 0!==s?s:1,m.props.privateSpan=c,m.props.privateColStart=v+1-c,m.props.privateShow=!0)}let h=0,b=!1;for(const{child:n,rawChildSpan:f}of l){if(b&&(this.overflow=!0),!b){const e=Number(null!==(i=w(null===(o=n.props)||void 0===o?void 0:o.offset,d))&&void 0!==i?i:0),t=Math.min(f+e,v)||1;if(n.props?(n.props.privateSpan=t,n.props.privateOffset=e):n.props={privateSpan:t,privateOffset:e},p){const e=h%v;t+e>v&&(h+=v-e),t+h+c>u*v?b=!0:h+=t}}b&&(n.props?!0!==n.props.privateShow&&(n.props.privateShow=!1):n.props={privateShow:!1})}return f("div",y({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),l.map((({child:e})=>e)))};return this.isResponsive&&"self"===this.responsive?f(i,{onResize:this.handleResize},{default:e}):e()}});export{G as _,C as a};

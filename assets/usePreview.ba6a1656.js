import{r as b,f as y,i as k,g as S,d as B,o as g,j as L,w as j,c as z,b as m,aq as N,u as s,ar as w,as as C,a as h,l as P,T as V,m as W,n as $}from"./index.3c472fcf.js";function A(e){const{onShow:i,data:n,active:u}=e,a=b(u),l=b({scale:1});y(()=>{k(i)&&i()}),S(a,()=>{l.value.scale=1});function f(){a.value>0&&(a.value-=1)}function p(){a.value<n.length-1&&(a.value+=1)}function t(d){if(d.wheelDelta>0){if(l.value.scale>=2)return;l.value.scale+=.1}else{if(+l.value.scale.toFixed(1)<=.1)return;l.value.scale-=.1}}return{active:a,prev:f,next:p,onWheel:t,imgConfig:l}}const D=["src"],E={class:"absolute bottom-[5%] text-white text-normal font-semibold"},F=B({name:"Preview",props:{onClose:null,afterLeave:null,onShow:null,show:{type:Boolean},data:null,active:null},setup(e){const i=e,{active:n,imgConfig:u,prev:a,next:l,onWheel:f}=A({data:i.data,active:i.active,onShow:i.onShow});return(p,t)=>{const d=W;return g(),L(V,{name:"fade-scale",onAfterLeave:e.afterLeave},{default:j(()=>{var v,x;return[e.show?(g(),z("div",{key:0,class:"bg-black bg-opacity-40 fixed top-0 left-0 right-0 bottom-0 z-[999] flex items-center justify-center",onClick:t[3]||(t[3]=(...r)=>e.onClose&&e.onClose(...r)),onWheel:t[4]||(t[4]=(...r)=>s(f)&&s(f)(...r))},[m("img",{style:N({transform:`scale(${s(u).scale})`}),src:(v=e.data)==null?void 0:v[s(n)],alt:"",onClick:t[0]||(t[0]=w(()=>{},["stop"]))},null,12,D),m("div",E,C(s(n)+1)+" / "+C((x=e.data)==null?void 0:x.length),1),m("div",{class:"absolute left-0 top-0 bottom-0 w-[10%] flex items-center justify-center text-large text-white font-semibold",onselectstart:"return false",onClick:t[1]||(t[1]=w((...r)=>s(a)&&s(a)(...r),["stop","prevent"]))},[h(d,{name:"prev",size:"36"})]),m("div",{class:"absolute right-0 top-0 bottom-0 w-[10%] flex items-center justify-center text-large text-white font-semibold",onselectstart:"return false",onClick:t[2]||(t[2]=w((...r)=>s(l)&&s(l)(...r),["stop"]))},[h(d,{name:"next",size:"36"})])],32)):P("",!0)]}),_:1},8,["onAfterLeave"])}}});let c=null,o=null;function T(){function e(){var n;((n=o==null?void 0:o.component)==null?void 0:n.props).show=!1}function i(n){c&&o||(c=document.createElement("div"),o=h(F,{onClose:e,afterLeave:()=>{c&&(document.body.removeChild(c),c=null,o=null)},onShow:()=>{var u;((u=o==null?void 0:o.component)==null?void 0:u.props).show=!0},show:!1,data:n.data,active:n.active||0}),$(o,c),document.body.appendChild(c))}return{open:i,close:e}}export{T as u};
